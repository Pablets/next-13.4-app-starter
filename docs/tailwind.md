> # ⚠️ If you dont know about tailwind, class variant authority or both read carefully.

This project is made with tailwind and you can start working straigh ahead, however we recommend to install the vscode plugins

- Tailwind css
- Tailwind fold

Important: you need to paste this config into your vscode settings in order to have tailwind class autocompletion inside cva()

```jsonc
	"tailwindCSS.experimental.classRegex": [
		[
			"cva\\(([^;]*)\\);",
			"[\"'`]([^\"'`]*).*?[\"'`]"
		],
		[
			"/\\*\\s*tw\\s*\\*/\\s*\\[([^;]*)\\]\\,",
			"'([^']*)'"
		],
		"/\\*\\s*tw\\s*\\*/\\s*'([^;]*)',\\s+",
		"/\\*\\s*tw\\s*\\*/\\s*\"([^;]*)\",\\s+",
	],
```

You can create complex component variants with class-variance-authority

## Example

```typescript
import { cva } from '@/lib/cva';

export const buttonVariants = cva(
  ['w-fit', 'rounded-xl'], // base styles
  {
    variants: {
      // a variant can have 2 or more options
      variant: {
        // the name of the prop
        primary: ['before:-z-10', 'before:absolute'],
        secondary: ['hover:bg-transparent', 'after:w-full'],
        ternary: 'hover:bg-red-600 after:w-full p-2 ml-4', // both an string separated by spaces or an array of strings are correct.
      },
      // also a variant can be a boolean variant that enforces one of two options. One of them must be defined as the default.
      firstChild: {
        true: ['mt-12', 'sm:mt-52', 'md:mt-52'],
        false: ['mt-32', 'sm:mt-48', 'md:mt-72'],
      },
    },
    defaultVariants: {
      variant: 'primary',
      firstChild: true,
    },
  },
);
```

```typescript

interface ButtonProps
	extends React.ButtonHTMLAttributes<HTMLButtonElement>,
		VariantProps<typeof buttonVariants> {
      ...// any other prop the component may need
    }
```

> VariantProps is a type helper that infers all the variants structure and provides the interface with all the props types. In this case it would be:
>
> ```
> /* interface ButtonProps {
>  variant: 'primary' | 'secondary' | 'ternary',
>  firstChild: Boolean,
>  ...aditional props
> } */
> ```
>
> <hr/>

Then you can use this props however you want to create any component, not just a button, because they are simply css classes.

```typescript
const Button: React.FC<ButtonProps> = ({ className, variant, firstChild ...props }) => (
	<button
		className={twMerge(buttonVariants({ variant, firstChild, className }))}
		{...props}
	/>
);

And later you can use them like any other component with variable styles applied based on props.

...
<Button variant="ternary" firstchild className="bg-black"/>
```

## About twMerge and class overrides

Thanks to twMerge you can safely use overlap classes without having conflict, for example:

`'bg-red-500, bg-black, bg-white' = 'bg-white'`

like the cascade system in css.

but beware, this would create two different classes:

`'pl-2, pl-4, p-4' = 'pl-2 p-4' => ??? `

In this case we can't know for sure if it will be pl-2 (padding-left: 2rem) or p-4 (padding: 4rem), this is based on the internals of tailwind.

Altough twMerge does a great job with normal utility classes, there are compound classes that are more difficult to type and detect like the above.

The most common case is when you declare base styles in your cva component.

```typescript
baseStyles: ['sm:gap-5', 'md:mx-auto', 'my-0'];
primary: ['mt-12', 'sm:mt-52', 'md:mt-52'];
```

in this case in a md screen with a primary variant it'll be:

['md:mx-auto', ***`'my-0'`***, ***`md:mt-52`*** ]

It's a conflict that's not easy to detect.

The only alternative is to split `my-0` into `mb-0` and `mt-0` and then it will be overriden correctly with twMerge.

Try to avoid this cases because the order in wich this classes are interpreted are determined by the order in what they are writen and you don't have control over it because the classes are autogenerated by tailwind at build time.

Conclusion: cva it's not for ALL the cases ALL the time, it's just another tool that exposes a powerful API to create complex components but they must be used only when necessary and with care.

There are advanced functionalities outside of the scope of this document like compount variants that are covered in the following documentation:

- https://cva.style/docs
- https://www.youtube.com/watch?v=T-Zv73yZ_QI
- https://www.youtube.com/watch?v=B6FrDu2Qbt0
